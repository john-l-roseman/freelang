Act as an expert Frontend Engineer. 
Build a single, standalone HTML file (index.html) for a language learning game.
IMPORTANT: Do not add any notes, markdown, or explanations at the top or bottom of the HTML file. Output ONLY the raw HTML.

1. GLOBAL CONFIGURATION
-----------------------
- CARDS_PER_ROUND: CARD_COUNT
- LANGUAGE_CODE: Two letter standard code for _LANGUAGE.
- GA_MEASUREMENT_ID: "G-XXXXXXXXXX"  


2. TECHNICAL STACK & SETUP
--------------------------
- React, ReactDOM, Babel (via CDN).
- TailwindCSS (via CDN).
- Embed all CSS/JS within the file.
- Analytics: Include the standard Google Analytics 4 (gtag.js) script in the <head>. Initialize `window.dataLayer` and config using the `GA_MEASUREMENT_ID`. 
- PWA: Include an embedded `manifest.json` (Blob) and Service Worker.
- PWA Icon: Generate a Base64 SVG (Green square, white text LANGUAGE_CODE) for the manifest. Short name: "_GAME".


3. ARCHITECTURE & STATE MANAGEMENT (CRITICAL)
---------------------------------------------
- Master Deck Initialization: Initialize `deckRef` using a Fisher-Yates shuffle of the full `RAW_DATA` array. Do NOT use the sorted data.
- Round State: Use `useState` only for the current CARDS_PER_ROUND pairs.
- Mastery Logic: When a match is made (no hint), remove the word from `deckRef.current` immediately.
- Win Condition: Check if `deckRef.current.length === 0` before starting a round.
- Round Transition: When last pair matches, slice next batch from `deckRef`.
- _LANGUAGE Column Logic: Must be a VALID DERANGEMENT (shuffled so no French card lines up horizontally with its English counterpart). CRITICAL: If the batch size is less than 2 (e.g., the final card), return the batch as-is without attempting to derange. This prevents an infinite loop.


4. LAYOUT & VISUALS
-------------------
- Structure: A flex-column container (h-100dvh).
  1. Header: Fixed height. Contains Score and ALL action buttons (defined below).
  2. Game Area: Flex-1, overflow-y: auto. Contains the two card columns.
- Columns: Two columns (50% width). Left = English, Right = _LANGUAGE.
- Card Content (Strict):
   - Left (English) Card: Display the English text AND a speaker icon button.
   - Right (French) Card: Display the French translation AND a speaker icon button.
   - Icons: Place the speaker icon immediately after the text on the same line (inline).
- Animations: Use a `.card-wrapper` class. On match, transition `max-height`, `opacity`, and `margin` to 0 to make cards slide up smoothly.
- Mobile View: The entire UI must fit on a single screen without horizontal scrolling.
- Desktop: Set CSS width (viewport) to 400px.
  3. Footer: Fixed height. Contains Copyright (defined below).

5. INTERACTION & EVENTS (STRICT CONSTRAINTS)
--------------------------------------------
You must implement two completely separate event handling systems. Do not unify them.

System A: Desktop (Mouse)
- Draggable Attribute: You MUST conditionally set `draggable={!isTouch}`. Detect touch capability on mount. If the device is touch-enabled, `draggable` MUST be false. This is critical to prevent the native "Long Press to Drag" behavior on mobile.
- Events: Use `onDragStart` and `onDrop`.
- PROHIBITED: Do NOT use `onMouseDown` or `onMouseMove` for dragging logic on Desktop.

System B: Mobile (Touch)
- Events: Use `onTouchStart`, `onTouchMove`, `onTouchEnd`.
- Conflict Prevention: Add `onContextMenu={(e) => { e.preventDefault(); e.stopPropagation(); }}` to the cards to block the system menu on long press.
- CSS Safety: Apply `user-select: none` and `-webkit-touch-callout: none` to the cards to prevent text selection or iOS magnifying glass.
- Ghost Card: Render a fixed-position duplicate card following the finger. It must have `pointer-events: none`.
- Scroll Fix: Apply `touch-action: none` via CSS to the draggable cards.
- Drop Detection: Use `document.elementFromPoint` in `onTouchEnd`. Always look for `.closest('.drop-zone')`.

Double-Tap Implementation (CRITICAL):
Do NOT use a custom hook (e.g., useDoubleTap) inside the .map loop. This violates React Rules of Hooks and causes a crash.
Implementation: Use a single useRef at the component level to store { id: null, time: 0 }.
Logic: On click/touch, check if currentId === ref.current.id and now - ref.current.time < 300. If yes, trigger hint. If no, update the ref.


6. GAME LOGIC
-------------
- Matching: Drag English to _LANGUAGE.
- Success: IDs match -> Play Chime -> Flash Green -> Cards Collapse/Slide Up -> Update Score.
- Fail: IDs mismatch -> Play Buzzer -> Flash Red -> Reset Streak -> Deduct Score.
- Hints:
  - Input: Triggered via the manual Double-Click/Tap logic defined in Section 5.
  - Visuals: The *_LANGUAGE* card with that ID flashes bright Orange. The English card does NOT change color.
  - Penalty: No points awarded for this word if hint is used.
  - Effect: Set a global state `hintTargetId`. The *_LANGUAGE* card with that ID flashes Orange. The English card does NOT change color.
  - Penalty: No points awarded for this word if hint is used.

7. AUDIO
--------
- Generation: Web Speech API. Filter voices for `localService: true` (offline support).
- Icons: Place a speaker icon immediately after the text (inline) on BOTH the English cards and the French cards.  Behavior: Clicking the English card speaker plays the English text; clicking the French card speaker plays the French text.
- Icon Styling: Explicitly set a fixed width/height (e.g., `w-[1em] h-[1em]`) relative to the font. You MUST add the class `flex-shrink-0` (or `shrink-0`) to the icon/button. This prevents the icon from being crushed or resized when text wraps to multiple lines.
- Speaker Icon: Wrap the icon in a button. Add `onMouseDown={(e) => e.stopPropagation()}`. Put the speaker icon immediately after the end of the text, not on a separate line. Use a "High Volume" style SVG icon, a solid-filled speaker body and three curved sound waves to the right.


8. HEADER & POPUPS
------------------
- Header Layout: Single line, compressed.
- Header Elements (Must include ALL of the following):
  0. "openlang.ai" (bold linked to "/")  
  1. Score Display: "Score X (Y% Learned)".
  2. Mute Icon: Toggles `isMuted` state. Mutes SFX (chime/buzzer) but NOT Text-to-Speech.
  3. Info icon (white lower case serif "i", inside black circle) : Opens Rules modal.
  4. Downward pointing arrow: Opens Install modal. (Hidden if app is running in standalone PWA mode).
  5. Source Button: Button in the upper right corner (strict), strict Link `<a href="/_LANGUAGE/_GAME/build-instructions.txt" download>SOURCE</a>`.
- Modals: Rules (rules + explain streak bonus); Install: (iOS: share icon -> Add to Home Screen, Android: Hamburger Icon -> Add to Home Screen).
- Closing: Add a global `window.addEventListener('keydown')` to close all modals when "Escape" is pressed.
- Buttons: Uniform color (Blue).

9. COPYRIGHT (Footer)
---------------------
Place the copyright text verbatim in the Footer (small print, centered):
- Link "Functional AI Inc" to: https://functional.by
- Link "MIT License" to: https://opensource.org/licenses/MIT

"Copyright (c) 2026 by Functional AI Inc. Licensed under the MIT License."
