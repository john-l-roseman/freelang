Act as an expert Frontend Engineer. 
Build a single, standalone HTML file (index.html) for a language learning game.
IMPORTANT: Do not add any notes, markdown, or explanations at the top or bottom of the HTML file. Output ONLY the raw HTML.

1. GLOBAL CONFIGURATION
-----------------------
- CARDS_PER_ROUND: CARD_COUNT
- LANGUAGE_CODE: Two letter standard code for _LANGUAGE.

2. TECHNICAL STACK & SETUP
--------------------------
- React, ReactDOM, Babel (via CDN).
- TailwindCSS (via CDN).
- Polyfill: `https://unpkg.com/mobile-drag-drop/index.min.js` (Include this script in head).
- Embed all CSS/JS within the file.
- PWA: Include an embedded `manifest.json` (Blob) and Service Worker.
- PWA Icon: Generate a Base64 SVG (Green square, white text LANGUAGE_CODE) for the manifest. Short name: "_GAME".

3. ARCHITECTURE & STATE MANAGEMENT (CRITICAL)
---------------------------------------------
- Master Deck: Use a `useRef` (e.g., `deckRef`) to store the full array of words. NEVER use useState for the full deck to prevent stale state issues.
- Round State: Use `useState` only for the current CARDS_PER_ROUND pairs being displayed.
- Mastery Logic: When a match is made without a hint, remove the word from `deckRef.current` immediately.
- Win Condition: Before starting a new round, check if `deckRef.current.length === 0`.
- Round Transition: When the last pair is matched, immediately slice the next CARDS_PER_ROUND words from `deckRef.current` and update the round state. Do not set the state to an empty array in between.
- Shuffle Logic (Derangement): The _LANGUAGE column must be a VALID DERANGEMENT relative to the English column. 


4. LAYOUT & VISUALS
-------------------
- Structure: A flex-column container (h-100dvh).
  1. Header: Fixed height. Contains Score and ALL action buttons (defined below).
  2. Game Area: Flex-1, overflow-y: auto. Contains the two card columns.
- Columns: Two columns (50% width). Left = English, Right = _LANGUAGE.
- Card Content (Strict):
  - Left (English) Card: Display the English text.
  - Right (_LANGUAGE) Card: Display the _LANGUAGE translation. 
- Animations: Use a `.card-wrapper` class. On match, transition `max-height`, `opacity`, and `margin` to 0 to make cards slide up smoothly.
- Mobile View: The entire UI must fit on a single screen without horizontal scrolling.
- Desktop: Set CSS width (viewport) to 400px.
  3. Footer: Fixed height. Contains Copyright (defined below).

5. INTERACTION & EVENTS (UNIFIED)
---------------------------------
Use Standard HTML5 Drag & Drop for BOTH Desktop and Mobile.

1. Initialization (Crucial):
   - Inside a `useEffect` on mount, run: `MobileDragDrop.polyfill({ dragImageTranslateOverride: MobileDragDrop.scrollBehaviourDragImageTranslateOverride });`
   - This enables touch support automatically.

2. Draggable Cards (English):
   - Attribute: `draggable="true"`.
   - CSS: Add `touch-action: none` to preventing browser zooming interference.
   - Event `onDragStart`: Set dataTransfer data (ID).

3. Drop Zones (French):
   - Event `onDragOver`: Call `e.preventDefault()` to allow dropping.
   - Event `onDrop`: Handle the match logic.

4. Double-Tap Hint Logic (Manual Detection):
   - Do NOT use `onDoubleClick` (unreliable with drag).
   - Implementation: Use `onTouchStart` (Mobile) and `onMouseDown` (Desktop).
   - Logic: Check `Date.now() - lastInteractionTime < 300`.
   - If Double-Tap: Trigger Hint and call `e.preventDefault()` to block the drag/click.
   - If Single-Tap: Do nothing (allow the Polyfill/Browser to handle the drag or scroll).

6. GAME LOGIC
-------------
- Matching: Drag English to _LANGUAGE.
- Success: IDs match -> Play Chime -> Flash Green -> Cards Collapse/Slide Up -> Update Score.
- Fail: IDs mismatch -> Play Buzzer -> Flash Red -> Reset Streak -> Deduct Score.
- Hints:
  - Input: Triggered via the manual Double-Click/Tap logic defined in Section 5.
  - Visuals: The *French* card with that ID flashes bright Orange. The English card does NOT change color.
  - Penalty: No points awarded for this word if hint is used.
  - Effect: Set a global state `hintTargetId`. The *_LANGUAGE* card with that ID flashes Orange. The English card does NOT change color.
  - Penalty: No points awarded for this word if hint is used.

7. AUDIO
--------
- Generation: Web Speech API. Filter voices for `localService: true` (offline support).
- Icons: Place speaker icon immediately after text (inline). 
- Icon Styling: Explicitly set a fixed width/height (e.g., `w-[1em] h-[1em]`) relative to the font. You MUST add the class `flex-shrink-0` (or `shrink-0`) to the icon/button. This prevents the icon from being crushed or resized when text wraps to multiple lines.

8. HEADER & POPUPS
------------------
- Header Layout: Single line, compressed.
- Header Elements (Must include ALL of the following):
  0. "openlang.ai" (bold linked to "/")  
  1. Score Display: "Score X (Y% Learned)".
  2. Mute Icon: Toggles `isMuted` state. Mutes SFX (chime/buzzer) but NOT Text-to-Speech.
  3. Info Icon: Opens Rules modal.
  4. Install Button: Opens Install modal. (Hidden if app is running in standalone PWA mode).
  5. Source Button: Button in the upper right corner (strict), strict Link `<a href="/_LANGUAGE/_GAME/build-instructions.txt" download>Source</a>`.
- Modals: Rules (explain streak bonus), Install iOS+Android (with iOS share icon instructions).
- Closing: Add a global `window.addEventListener('keydown')` to close all modals when "Escape" is pressed.
- Buttons: Uniform color (Blue).

9. COPYRIGHT (Footer)
---------------------
Place the copyright text verbatim in the Footer (small print, centered):
- Link "Functional AI Inc" to: https://functional.by
- Link "MIT License" to: https://opensource.org/licenses/MIT

"Copyright (c) 2026 by Functional AI Inc. Licensed under the MIT License."
