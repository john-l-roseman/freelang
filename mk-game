PROMPT="../../Scripts/drag-and-drop"
LANGUAGE=`pwd | awk -F/ '{print $(NF-1)}'`;
GAME=`pwd | awk -F/ '{print $NF}'`;
CARD_COUNT=`cat "../../Rules/$GAME/count"`
GAME_STRING=`echo $GAME | sed "/s/ /_/g"`

TRANSLATE="Text-Translate";
if  echo $GAME | egrep "Capitalist|Leftist|Philosophy|Religious" ; 
then  
TRANSLATE="Quote-Translate";
fi

(
echo "0. CONTENT GENERATION"
echo "---------------------";
cat "../../Rules/$GAME/dataset";
cat "../../Scripts/$TRANSLATE";
cat $PROMPT ;
cat ../addendum
)| sed "s/_TARGET_LANGUAGE/$LANGUAGE/g" |
	sed "s/_BASE_LANGUAGE/English/g" |
	sed "s/_CARD_COUNT/$CARD_COUNT/" | 
	sed "s/_GAME_STRING/$GAME_STRING/" |
	sed "s/_GAME/$GAME/g" > build-instructions.txt


date;
python3.10 /usr/local/bin/run-gemini-streaming.py build-instructions.txt index.html 
date;




